---
const milestones = [
  {
    date: '2011–2017',
    company: 'HP (Hewlett-Packard)',
    role: 'Intern → Developer',
    description:
      'Built server management systems for ROMQA testing. Turned 6-year internship into enterprise-grade development experience.',
    tech: ['C', 'PowerShell', 'Server Management'],
  },
  {
    date: '2017–2022',
    company: 'Microsoft',
    role: 'Technical Consultant',
    description:
      'Full-stack development for Fortune 500 clients including NFL Surface, NYPD, MasterCard Track. Led DevOps transformation across multiple enterprise teams.',
    tech: ['C#', 'Azure', 'React', 'DevOps'],
  },
  {
    date: '2020–2022',
    company: 'HTek Consulting',
    role: 'Founder',
    description:
      'Independent consulting — mobile apps, cloud architecture, full-stack solutions.',
    tech: ['React Native', 'Azure', 'Elixir'],
  },
  {
    date: '2022–2023',
    company: 'Neudesic (IBM)',
    role: 'Senior Consultant II',
    description: 'Microsoft Cloud best practices and delivery.',
    tech: ['Azure', 'Cloud Architecture'],
  },
  {
    date: '2023–2025',
    company: 'Enbridge',
    role: 'Technical Manager, DevOps',
    description:
      'Led 500+ GitHub migrations from Azure DevOps, BitBucket, SVN. Spearheaded digital transformation and GitHub Enterprise standardization.',
    tech: ['GitHub', 'PowerShell', 'IaC', 'CI/CD'],
  },
  {
    date: '2025–Present',
    company: 'Microsoft',
    role: 'Senior Solutions Engineer',
    description:
      'Empowering organizations to build modern software with GitHub Copilot & AI. Driving enterprise AI adoption across Fortune 100.',
    tech: ['GitHub Copilot', 'AI', 'DevOps'],
  },
  {
    date: '2022–Present',
    company: 'DID Health',
    role: 'Co-Founder',
    description: 'Blockchain-based health information platform.',
    tech: ['Blockchain', 'Web3'],
  },
];
---

<section id="timeline" class="min-h-screen py-20 px-6">
  <div class="max-w-5xl mx-auto">
    <!-- Section heading -->
    <div class="text-center mb-16">
      <p class="font-mono text-accent-cyan text-sm mb-2">&gt; career.timeline()</p>
      <h2 class="text-4xl md:text-5xl font-heading font-bold">
        <span class="bg-gradient-to-r from-accent-cyan to-accent-purple bg-clip-text text-transparent">
          The Journey
        </span>
      </h2>
    </div>

    <!-- Timeline -->
    <div class="timeline-container relative">
      <!-- Glowing center line -->
      <div class="timeline-line absolute left-6 md:left-1/2 top-0 bottom-0 w-px md:-translate-x-px">
        <div class="h-full w-full bg-gradient-to-b from-accent-cyan via-accent-purple to-accent-cyan opacity-60"></div>
        <div class="absolute inset-0 w-full bg-gradient-to-b from-accent-cyan via-accent-purple to-accent-cyan blur-sm opacity-40"></div>
      </div>

      {milestones.map((m, i) => {
        const isLeft = i % 2 === 0;
        return (
          <div
            class:list={[
              'timeline-item relative flex mb-12 md:mb-16',
              isLeft ? 'md:justify-start' : 'md:justify-end',
            ]}
          >
            {/* Dot on the line */}
            <div class="timeline-dot absolute left-6 md:left-1/2 top-8 w-3 h-3 -translate-x-1/2 rounded-full bg-accent-cyan shadow-[0_0_8px_var(--color-accent-cyan)] z-10" />

            {/* Card */}
            <div
              class:list={[
                'timeline-card ml-14 md:ml-0 md:w-[calc(50%-2.5rem)]',
                isLeft ? 'md:mr-auto md:pr-0' : 'md:ml-auto md:pl-0',
              ]}
            >
              <div class="group relative rounded-xl bg-bg-secondary/50 backdrop-blur-md border border-border/50 p-6 transition-all duration-300 hover:border-accent-cyan/60 hover:shadow-[0_0_20px_var(--color-glow-cyan)]">
                {/* Date badge */}
                <span class="inline-block font-mono text-xs text-accent-cyan bg-accent-cyan/10 px-3 py-1 rounded-full mb-3">
                  {m.date}
                </span>

                {/* Company & role */}
                <h3 class="text-lg font-heading font-semibold text-text-primary mb-1">
                  {m.company}
                </h3>
                <p class="text-sm text-accent-purple font-medium mb-3">{m.role}</p>

                {/* Description */}
                <p class="text-sm text-text-secondary leading-relaxed mb-4">
                  {m.description}
                </p>

                {/* Tech tags */}
                <div class="flex flex-wrap gap-2">
                  {m.tech.map((t) => (
                    <span class="text-xs font-mono text-text-tertiary bg-bg-tertiary/60 px-2 py-0.5 rounded">
                      {t}
                    </span>
                  ))}
                </div>
              </div>
            </div>
          </div>
        );
      })}
    </div>
  </div>
</section>

<style>
  /* Reveal-on-scroll animation */
  .timeline-item {
    opacity: 0;
    transform: translateY(32px);
  }

  .timeline-item.is-visible {
    animation: revealUp 0.6s ease-out forwards;
  }

  @keyframes revealUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Stagger delays applied via JS */
  .timeline-dot {
    opacity: 0;
    transform: translate(-50%, 0) scale(0);
  }

  .timeline-item.is-visible .timeline-dot {
    animation: popIn 0.4s ease-out 0.2s forwards;
  }

  @keyframes popIn {
    to {
      opacity: 1;
      transform: translate(-50%, 0) scale(1);
    }
  }

  /* Pulse on the timeline line */
  .timeline-line::after {
    content: '';
    position: absolute;
    inset: 0;
    width: 100%;
    background: linear-gradient(
      to bottom,
      var(--color-accent-cyan),
      var(--color-accent-purple),
      var(--color-accent-cyan)
    );
    filter: blur(6px);
    opacity: 0.25;
    animation: linePulse 4s ease-in-out infinite;
  }

  @keyframes linePulse {
    0%, 100% { opacity: 0.2; }
    50% { opacity: 0.45; }
  }
</style>

<script>
  const items = document.querySelectorAll('.timeline-item');

  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add('is-visible');
          observer.unobserve(entry.target);
        }
      });
    },
    { threshold: 0.15, rootMargin: '0px 0px -40px 0px' }
  );

  items.forEach((item) => observer.observe(item));
</script>
